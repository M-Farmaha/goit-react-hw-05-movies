"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[134],{65:function(e,n,t){function r(e,n,t,r,a,c,u){try{var o=e[c](u),s=o.value}catch(i){return void t(i)}o.done?n(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(a,c){var u=e.apply(n,t);function o(e){r(u,a,c,o,s,"next",e)}function s(e){r(u,a,c,o,s,"throw",e)}o(void 0)}))}}t.d(n,{lJ:function(){return h},yI:function(){return l},DZ:function(){return p},mc:function(){return f},DM:function(){return i}});var c=t(757),u=t.n(c),o="https://api.themoviedb.org/3/",s="ef24936cd708c9aa0029dc0cfa81df25",i=function(){var e=a(u().mark((function e(){var n,t,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(o,"trending/movie/day?api_key=").concat(s),e.next=3,fetch(n);case 3:if(!(t=e.sent).ok){e.next=11;break}return e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.next=13,t.json();case 13:throw a=e.sent,new Error(a);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=a(u().mark((function e(n){var t,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/search/movie?api_key=").concat(s,"&language=en-US&page=1&include_adult=false&query=").concat(n,"&page=1"),e.next=3,fetch(t);case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.next=13,r.json();case 13:throw c=e.sent,new Error(c);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=a(u().mark((function e(n){var t,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/movie/").concat(n,"?api_key=").concat(s,"&language=en-US"),e.next=3,fetch(t);case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.next=13,r.json();case 13:throw c=e.sent,new Error(c);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=a(u().mark((function e(n){var t,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/movie/").concat(n,"/credits?api_key=").concat(s,"&language=en-US"),e.next=3,fetch(t);case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.next=13,r.json();case 13:throw c=e.sent,new Error(c);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=a(u().mark((function e(n){var t,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/movie/").concat(n,"/reviews?api_key=").concat(s,"&language=en-US"),e.next=3,fetch(t);case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:return e.next=13,r.json();case 13:throw c=e.sent,new Error(c);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},134:function(e,n,t){t.r(n);var r=t(439),a=t(791),c=t(65),u=t(746),o=t(87),s=t(689),i=t(184);n.default=function(){var e,n,t=(0,a.useState)(null!==(e=JSON.parse(window.localStorage.getItem("searchMovies")))&&void 0!==e?e:[]),f=(0,r.Z)(t,2),l=f[0],h=f[1],p=(0,a.useState)(null!==(n=JSON.parse(window.localStorage.getItem("searchQuery")))&&void 0!==n?n:""),v=(0,r.Z)(p,2),x=v[0],d=v[1],w=(0,a.useState)(!1),m=(0,r.Z)(w,2),g=m[0],k=m[1],y=(0,o.lr)(),j=(0,r.Z)(y,2),S=j[0],b=j[1],_=S.get("query"),E=(0,s.TH)();(0,a.useEffect)((function(){window.localStorage.setItem("searchQuery",JSON.stringify(x))}),[x]),(0,a.useEffect)((function(){window.localStorage.setItem("searchMovies",JSON.stringify(l))}),[l]),(0,a.useEffect)((function(){_&&(k(!1),(0,c.mc)(_).then((function(e){h(e.results),0===e.results.length&&k(!0)})).catch((function(e){return console.log(e)})))}),[_]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.yh,{children:(0,i.jsxs)(u.l0,{onSubmit:function(e){e.preventDefault();var n=e.currentTarget.elements.search.value;""!==n.trim()&&(b({query:n}),d(""))},children:[(0,i.jsx)(u.IG,{autoComplete:"off",type:"text",name:"search",value:x,onChange:function(e){d(e.target.value)}}),(0,i.jsx)(u.j$,{type:"submit",children:(0,i.jsx)(u.aM,{})})]})}),g&&(0,i.jsx)("h2",{children:"There are no movies for your request :("}),0!==l.length&&(0,i.jsx)(u.vp,{children:l.map((function(e){return(0,i.jsx)("li",{children:(0,i.jsx)(u.jJ,{to:"".concat(e.id),state:E,children:e.title})},e.id)}))})]})}}}]);
//# sourceMappingURL=134.30e181f4.chunk.js.map